server:
  port: 8083
spring:
  profiles:
    include: migration
  jpa:
    legacy-ad:
      hikari:
        maximum-pool-size: 100
    recent-ad:
      hikari:
        maximum-pool-size: 100
  cloud:
    stream:
      kafka:
        bindings:
          migrationUserConsumer-in-0:
            consumer:
              startOffset: latest
          migration-user-out:
            producer:
              sync: true
      binders:
        migration-kafka:
          type: kafka
          environment:
            spring.cloud.stream.kafka.binder:
              brokers: localhost
              defaultBrokerPort: 9194
              replication-factor: 1
              auto-create-topics: true
              auto-add-partitions: true
              min-partition-count: 4
      bindings:
        migrationUserConsumer-in-0:
          binder: migration-kafka
          destination: migration-user-topic
          group: batch-migration
        migration-user-out:
          binder: migration-kafka
          destination: migration-user-topic
          producer:
            partition-key-expression: headers['partitionKey']
            partition-count: 4

logging:
  file:
    name: logs/batch.log